#!/usr/bin/env ruby
require 'pry'

class Hyde
  attr_reader :action, :path

  def initialize(action = ARGV[0], path = ARGV[1])
    @action = action
    @path   = path
  end

  def clone_template(path)
    FileUtils.cp_r( 'bin/template/.', path)
  end

  def check_path(path)
    Dir.exist?(path)
  end

  def parse_submission
    raise ArgumentError if check_path(path)
    timestamp = Time.new.to_s.split[0]
    if action == 'new'
      clone_template(path)
      full_path_to_welcome = path + "/source/posts/"
      File.rename(full_path_to_welcome + 'welcome.markdown', full_path_to_welcome + timestamp + '-welcome-to-hyde.markdown')
    end
  end

end


if __FILE__ == $0

  Hyde.new.parse_submission

end
