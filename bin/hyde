#!/usr/bin/env ruby

require_relative '../lib/hyde'

class Parse
  attr_reader :action

  def initialize
    @action = ARGV[0]
    @path   = ARGV[1]
    @title  = ARGV[2..-1]
  end

  def parse_submission
    case action
    when 'new'
      hyde = Hyde.new(@action, @path)
      hyde.build_new
    when 'build'
      hyde = Hyde.new(@action, @path)
      hyde.build_output
    when 'post'
      hyde = Hyde.new(@action, @path, @title)
      hyde.build_post
    end
  end
end

if __FILE__ == $0

  Parse.new.parse_submission

end
